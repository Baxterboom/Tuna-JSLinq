"use strict";var JSLinqOrderDirection,JSLinqHelper=function(){function r(){}return r.NonEnumerable=function(r,e,n){Object.defineProperty(r,e,{value:n,enumerable:!1,configurable:!0})},r.OrderCompareFunction=function(r,e,n,t){var i=r(e),o=r(n),u=typeof i,a=typeof o;if("string"===u&&u===a){var l=i,p=o;return(l=l.toLowerCase())>(p=p.toLowerCase())?!0===t?-1:1:l<p?!0===t?1:-1:0}if("number"===u&&u===a){return!0===t?o-i:i-o}if("boolean"===u&&u===a){return i===o?0:!0===t?i?1:-1:i?-1:1}return"undefined"===u&&u===a?0:"undefined"===u?t?1:-1:"undefined"===a?t?-1:1:0},r}(),JSLinq=function(r){return r&&!Array.isArray(r)&&(r=[r]),r||[]};JSLinqHelper.NonEnumerable(Array.prototype,"_JSLinq",{Order:void 0}),function(r){r[r.Ascending=0]="Ascending",r[r.Descending=1]="Descending"}(JSLinqOrderDirection||(JSLinqOrderDirection={}));var JSLinqOrder=function(){return function(r,e){this.direction=r,this.selector=e}}();JSLinqHelper.NonEnumerable(Array.prototype,"Add",function(r){return this.push(r),this}),JSLinqHelper.NonEnumerable(Array.prototype,"AddRange",function(r){var e=this;return r.ForEach(function(r){return e.push(r)}),this}),JSLinqHelper.NonEnumerable(Array.prototype,"Aggregate",function(r,e){return this.reduce(r,e)}),JSLinqHelper.NonEnumerable(Array.prototype,"All",function(r){return this.Count(r)===this.Count()}),JSLinqHelper.NonEnumerable(Array.prototype,"Any",function(r){if(!r)return this.length>0;var e=!1;return this.ForEach(function(n,t){return e=!0===r(n,t)}),e}),JSLinqHelper.NonEnumerable(Array.prototype,"Average",function(r){return this.Sum(r)/this.Count()}),JSLinqHelper.NonEnumerable(Array.prototype,"Clear",function(){return this.length=0,this}),JSLinqHelper.NonEnumerable(Array.prototype,"Clone",function(){return this.slice(0)}),JSLinqHelper.NonEnumerable(Array.prototype,"Concat",function(r){return this.concat(r)}),JSLinqHelper.NonEnumerable(Array.prototype,"Contains",function(r){return this.Any(function(e){return e===r})}),JSLinqHelper.NonEnumerable(Array.prototype,"Count",function(r){return r?this.Where(r).length:this.length}),JSLinqHelper.NonEnumerable(Array.prototype,"Distinct",function(r){var e=new Array,n=this.GroupBy(r);for(var t in n){var i=n[t];i.Any()&&e.Add(i[0])}return e}),JSLinqHelper.NonEnumerable(Array.prototype,"FindIndex",function(r){if(!r)throw new Error("Tuna-JSLinq: You must define a selector");var e=-1;return this.ForEach(function(n,t){var i=!0===r(n,t);return i&&(e=t),i}),e}),JSLinqHelper.NonEnumerable(Array.prototype,"FindLastIndex",function(r){if(!r)throw new Error("Tuna-JSLinq: You must define a selector");for(var e=this.length;e--;)if(!0===r(this[e],e))return e;return-1}),JSLinqHelper.NonEnumerable(Array.prototype,"First",function(r){var e=this.FirstOrDefault(r);if(e)return e;throw new Error("Tuna-JSLinq: The First Entry was not found")}),JSLinqHelper.NonEnumerable(Array.prototype,"FirstOrDefault",function(r){if(!r)return this.length>0?this[0]:null;var e=null;return this.ForEach(function(n,t){var i=!0===r(n,t);return i&&(e=n),i}),e}),JSLinqHelper.NonEnumerable(Array.prototype,"ForEach",function(r){for(var e=this.length,n=0;n<e;n++){if(!0===r(this[n],n))break}return this}),JSLinqHelper.NonEnumerable(Array.prototype,"Get",function(r){var e=this[r];return void 0===e?null:e}),JSLinqHelper.NonEnumerable(Array.prototype,"GroupBy",function(r){return this.reduce(function(e,n){var t=r?r(n):n;return e[t]=e[t]||[],e[t].push(n),e},{})}),JSLinqHelper.NonEnumerable(Array.prototype,"Insert",function(r,e){return this.splice(e,0,r),this}),JSLinqHelper.NonEnumerable(Array.prototype,"Intersect",function(r){return this.Where(function(e){return r.Contains(e)})}),JSLinqHelper.NonEnumerable(Array.prototype,"Join",function(r,e){var n=this;return e&&(n=this.Select(e)),n.join(r)}),JSLinqHelper.NonEnumerable(Array.prototype,"Last",function(r){var e=this.LastOrDefault(r);if(e)return e;throw new Error("Tuna-JSLinq: The Last Entry was not found")}),JSLinqHelper.NonEnumerable(Array.prototype,"LastOrDefault",function(r){if(!r)return this.length>0?this[this.length-1]:null;for(var e=null,n=this.length;n--;){var t=this[n];if(!0===r(t,n)){e=t;break}}return e}),JSLinqHelper.NonEnumerable(Array.prototype,"Max",function(r){var e=r||function(r){return r};return this.OrderBy(e).LastOrDefault()}),JSLinqHelper.NonEnumerable(Array.prototype,"Min",function(r){var e=r||function(r){return r};return this.OrderBy(e).FirstOrDefault()}),JSLinqHelper.NonEnumerable(Array.prototype,"Move",function(r,e){return this.splice(e,0,this.splice(r,1)[0]),this}),JSLinqHelper.NonEnumerable(Array.prototype,"OrderBy",function(r){var e=this.Clone();return e._JSLinq.Order=new Array(new JSLinqOrder(JSLinqOrderDirection.Ascending,r)),e.sort(function(e,n){return JSLinqHelper.OrderCompareFunction(r,e,n,!1)})}),JSLinqHelper.NonEnumerable(Array.prototype,"OrderByDescending",function(r){var e=this.Clone();return e._JSLinq.Order=new Array(new JSLinqOrder(JSLinqOrderDirection.Descending,r)),e.sort(function(e,n){return JSLinqHelper.OrderCompareFunction(r,e,n,!0)})}),JSLinqHelper.NonEnumerable(Array.prototype,"Range",function(r,e){return this.Skip(r).Take(e)}),JSLinqHelper.NonEnumerable(Array.prototype,"Remove",function(r){var e=this.indexOf(r);return e>-1&&this.RemoveAt(e),this}),JSLinqHelper.NonEnumerable(Array.prototype,"RemoveAll",function(r){if(!r)return this.Clear();for(var e=this.length;e--;){!0===r(this[e],e)&&this.RemoveAt(e)}return this}),JSLinqHelper.NonEnumerable(Array.prototype,"RemoveAt",function(r){return this.splice(r,1),this}),JSLinqHelper.NonEnumerable(Array.prototype,"RemoveRange",function(r,e){var n=this;return this.Skip(r).Take(e).ForEach(function(r){return n.Remove(r)}),this}),JSLinqHelper.NonEnumerable(Array.prototype,"Repeat",function(r,e){for(var n=0;n<e;n++)this.Add(r);return this}),JSLinqHelper.NonEnumerable(Array.prototype,"Reverse",function(){return this.reverse()}),JSLinqHelper.NonEnumerable(Array.prototype,"Select",function(r){var e=new Array;return this.ForEach(function(n,t){var i=r(n,t);e.Add(i)}),e}),JSLinqHelper.NonEnumerable(Array.prototype,"SelectMany",function(r){var e=new Array;return this.ForEach(function(n,t){var i=r(n,t)||[];e.AddRange(i)}),e}),JSLinqHelper.NonEnumerable(Array.prototype,"SequenceEqual",function(r){if(this===r)return!0;if(this.length!==r.length)return!1;for(var e=0;e<this.length;e++){if(this[e]!==r[e])return!1}return!0}),JSLinqHelper.NonEnumerable(Array.prototype,"Single",function(r){var e=r?this.Where(r):this;if(1!==e.Count())throw new Error("Tuna-JSLinq: The array does not contain exactly one element");return e.First()}),JSLinqHelper.NonEnumerable(Array.prototype,"SingleOrDefault",function(r){return this.Any(r)?this.Single(r):null}),JSLinqHelper.NonEnumerable(Array.prototype,"Skip",function(r){return this.slice(r,this.Count())}),JSLinqHelper.NonEnumerable(Array.prototype,"Sum",function(r){var e=0,n=r||function(r){return r};return this.ForEach(function(r){e+=n(r)}),e}),JSLinqHelper.NonEnumerable(Array.prototype,"Take",function(r){return this.slice(0,r)}),JSLinqHelper.NonEnumerable(Array.prototype,"TakeWhile",function(r){for(var e=[],n=this.length,t=0;t<n&&!0===r(this[t],t);)e.push(this[t++]);return e}),JSLinqHelper.NonEnumerable(Array.prototype,"ThenBy",function(r){var e=this._JSLinq.Order;if(null==e||!e.Any())throw new Error("Tuna-JSLinq: Please call OrderBy or OrderByDescending before ThenBy");return e.Add(new JSLinqOrder(JSLinqOrderDirection.Ascending,r)),this.sort(function(r,n){for(var t=0,i=e;t<i.length;t++){var o=i[t],u=JSLinqHelper.OrderCompareFunction(o.selector,r,n,o.direction===JSLinqOrderDirection.Descending);if(0!==u)return u}return 0})}),JSLinqHelper.NonEnumerable(Array.prototype,"ThenByDescending",function(r){var e=this._JSLinq.Order;if(null==e||!e.Any())throw new Error("Tuna-JSLinq: Please call OrderBy or OrderByDescending before ThenByDescending");return e.Add(new JSLinqOrder(JSLinqOrderDirection.Descending,r)),this.sort(function(r,n){for(var t=0,i=e;t<i.length;t++){var o=i[t],u=JSLinqHelper.OrderCompareFunction(o.selector,r,n,o.direction===JSLinqOrderDirection.Descending);if(0!==u)return u}return 0})}),JSLinqHelper.NonEnumerable(Array.prototype,"ToDictionary",function(r,e){var n=this.GroupBy(r);if(e)for(var t in n)n[t]=n[t].Select(e);return n}),JSLinqHelper.NonEnumerable(Array.prototype,"Union",function(r){return this.Concat(r).Distinct()}),JSLinqHelper.NonEnumerable(Array.prototype,"Where",function(r){if(!r)throw new Error("Tuna-JSLinq: You must define a selector");var e=new Array;return this.ForEach(function(n,t){!0===r(n,t)&&e.push(n)}),e}),JSLinqHelper.NonEnumerable(Array.prototype,"Zip",function(r,e){var n=new Array;return this.ForEach(function(t,i){null!=t&&n.Add(e(t,r[i]))}),n});